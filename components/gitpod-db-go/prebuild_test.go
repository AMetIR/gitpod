package db

import (
	"fmt"
	"github.com/google/uuid"
	"github.com/stretchr/testify/require"
	"testing"
)

func TestPrebuildRead(t *testing.T) {
	db := getPreviewDB(t)

	prebuild := Prebuild{}
	tx := db.First(&prebuild, uuid.MustParse("27836aaa-acb7-45a8-82d0-924c18d8aa26"))
	require.NoError(t, tx.Error)

	// +--------------------------------------+--------------------------------------------------------+------------------------------------------+-----------+----------------------------+--------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+-------+----------------------------+--------------------------------------+--------+-----------------+
	//| id                                   | cloneURL                                               | commit                                   | state     | creationTime               | buildWorkspaceId                     | snapshot                                                                                                                          | error | _lastModified              | projectId                            | branch | statusVersion   |
	//+--------------------------------------+--------------------------------------------------------+------------------------------------------+-----------+----------------------------+--------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+-------+----------------------------+--------------------------------------+--------+-----------------+
	//| 27836aaa-acb7-45a8-82d0-924c18d8aa26 | https://gitlab.com/gitpod-milan/gitpod-large-image.git | d741ef690a211f5a4157f3edc685c984b3b4b1d1 | available | 2022-04-10 14:30:55.170277 | gitpodmilan-gitpodlargei-zmghwy9q41t | workspaces/gitpodmilan-gitpodlargei-zmghwy9q41t/snapshot-1649601374866319750.tar@gitpod-user-1a8ce801-b849-43e2-8c1c-d19473976e55 |       | 2022-04-10 14:36:14.926379 | 5b9599ea-235c-4659-80ff-44cc944d7fad | main   | 108108275646469 |
	//+--------------------------------------+--------------------------------------------------------+------------------------------------------+-----------+----------------------------+--------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+-------+----------------------------+--------------------------------------+--------+-----------------+

	fmt.Print(prebuild)
}
